//---------------------------------------------------------------------------

#ifndef TMySocketH
#define TMySocketH

#include <string>

#include <windows.h>

#ifndef SOCKET
	#define SOCKET int
#endif
//---------------------------------------------------------------------------

using namespace std ;

class TMySocket
{
	public:
		TMySocket();
		virtual ~TMySocket() ;


		void socketErrorExit(string error) ;
		SOCKET doListen(unsigned short portnum) ;
		SOCKET doAccept(SOCKET s) ;
		SOCKET doConnect(string host, unsigned short portnum) ;
		int doClose() ;
		void checkSocketError(int error, string message) ;
		void cleanAndExit(int error) ;
		SOCKET getSocket() ;
		int getErrorCode() ;
	protected:
		SCOKET _socket ;

	private:
		void initWinsockLib() ;

		bool _initialized ;
		int _error_code ;

};
#endif
